{
  "version": "0.2.0",
  "configurations": [
    {
      "name": "Python Debugger: Current File",
      "type": "debugpy",
      "request": "launch",
      "program": "${file}",
      "console": "integratedTerminal"
    },
    {
      "type": "bashdb",
      "request": "launch",
      "name": "Bash-Debug (select script from list of sh files)",
      "cwd": "${workspaceFolder}",
      "program": "${command:SelectScriptName}",
      "args": []
    },
    {
      "name": "PyTorch Debug",
      "type": "python",
      "request": "launch",
      "program": "${workspaceFolder}/scripts_vit/image_train_vit.py",
      "console": "integratedTerminal",
      "env": {
        // "CUDA_VISIBLE_DEVICES": "1,2,3,4",
        "DEBUG_MODE": "1"
      },
      "args": [
        "--batch_size",
        "2",
        "--exp_name",
        "debug_vit-b_layer12_lr1e-4_099_099_pred_x0__min_snr_5__fp16",
        "--data_dir",
        "/data4/share/xiaolong/dataset/ILSVRC2012_ldm_256_diffuser/train",
        // "--data_dir", "/data4/share/imagenet/train",
        "--image_size",
        "32",
        "--class_cond",
        "True",
        "--diffusion_steps",
        "1000",
        "--noise_schedule",
        "cosine",
        "--rescale_learned_sigmas",
        "False",
        "--lr",
        "1e-4",
        "--log_interval",
        "10",
        "--beta1",
        "0.99",
        "--beta2",
        "0.99",
        "--use_fp16",
        "True",
        "--weight_decay",
        "0.03",
        "--use_wandb",
        "True",
        "--model_name",
        "vit_base_patch2_32",
        "--depth",
        "12",
        "--predict_xstart",
        "True",
        "--warmup_steps",
        "0",
        "--lr_anneal_steps",
        "0",
        "--mse_loss_weight_type",
        "min_snr_5",
        "--clip_norm",
        "-1",
        "--in_chans",
        "3",
        "--drop_label_prob",
        "0.15",
        "--save_interval",
        "1000",
        "--schedule_sampler",
        "min_max_bin_sampler",
        "--time_bins",
        "0 100, 300 400, 600 700, 900 1000"
        // "--resume_checkpoint", "exp/guided_diffusion/debug_vit-b_layer12_lr1e-4_099_099_pred_x0__min_snr_5__fp16_bs3x64/model000440.pt"
      ]
    },
    {
      "name": "sample",
      "type": "python",
      "request": "launch",
      "justMyCode": false,
      "program": "${workspaceFolder}/scripts_vit/sampler_edm.py",
      "console": "integratedTerminal",
      "env": {
        "OPENAI_LOGDIR": "exp/guided_diffusion/xl_samples50000_step50_scale1.5",
        "NUM_SAMPLES": "50000",
        "IMG_SIZE": "32",
        "BATCH_SIZE": "3",
        "MODEL_NAME": "vit_xl_patch2_32",
        "DEPTH": "28",
        "GUIDANCE_SCALE": "1.5",
        "STEP": "50",
        "PRED_X0": "True",
        "CKPT": "exp/guided_diffusion/ema_0.9999_xl.pt",
        "DEBUG_MODE": "1",
        "CUDA_VISIBLE_DEVICES": "1,3,4,6"
      },
      "args": [
        "--model_path",
        "exp/guided_diffusion/ema_0.9999_xl.pt",
        "--class_cond",
        "True",
        // "--image_size", "${env:IMG_SIZE}",
        "--image_size",
        "32",
        "--model_name",
        "vit_xl_patch2_32",
        "--depth",
        "28",
        "--in_chans",
        "4",
        "--predict_xstart",
        "True",
        "--diffusion_steps",
        "1000",
        "--noise_schedule",
        "cosine",
        "--rescale_learned_sigmas",
        "False",
        "--rescale_timesteps",
        "False",
        "--batch_size",
        "3",
        "--num_samples",
        "50000",
        "--steps",
        "50",
        "--guidance_scale",
        "1.5"
      ]
    }
  ]
}
